<chapter id="sum.processor.preprocessor">
    <title>The Synergy Preprocessor</title>

    <para>
        The Synergy Preprocessor is the first of three main modules within the MERIS/(A)ATSR Synergy toolbox.
        As the other modules, it can be accessed through the 'Tools' menu in BEAM Visat
        (<xref linkend="figure.visat.synergy" xrefstyle="select: label"/>).
        This preprocessor is supposed to be used for the generation of a colocated MERIS/AATSR source product
        which will serve as input for the Cloud Screening processor.
    </para>

    <figure id="figure.visat.synergy">
        <title>The MERIS/(A)ATSR Synergy toolbox in BEAM Visat</title>
        <graphic scale="40" fileref="figures/synergy_in_beam.png"/>
    </figure>

    <para>
        The user interface for the Synergy Preprocessor is represented by one main dialog, which
        consists of the following components:
        <itemizedlist mark='bullet'>
            <listitem>
                 'I/O Parameters' Tab Pane
            </listitem>
        </itemizedlist>
        There are no processing parameters for this processor, therefore no additional tab pane
        is required.
    </para>

    <sect1 id="sum.processor.preprocessor.io">
        <title>I/O Parameters Tab Pane</title>

        <figure id="figure.processor.preprocessor.iotab">
			<title>Synergy Preprocessor: I/O Parameters Tab Pane</title>
			<graphic scale="60" fileref="figures/iotab_preprocessing.png"/>
		</figure>

        This tab pane consists of the following components:
        <itemizedlist mark='bullet'>
            <listitem>
                MERIS source product file: Select the source product file by either typing the product path into the text
                filed or by pressing the file selection button to invoke a standard file dialog.
                This source product must be a standard MERIS L1b product.
            </listitem>
            <listitem>
                AATSR source product file: Select the source product file by either typing the product path into the text
                filed or by pressing the file selection button to invoke a standard file dialog.
                This source product must be a standard AATSR L1b product.
            </listitem>
            <listitem>
                Target product file: Select the target product file by either typing the product path into the text
                filed or by pressing the file selection button to invoke a standard file dialog.
            </listitem>
            <listitem>
                 Target product format and target directory:
                 <itemizedlist mark='bullet'>
                    <listitem>
                        'Save as': If this checkbox is selected, the output product will be saved to disk.
                    </listitem>
                    <listitem>
                        Target product format: Select one of the available output product formats.
                    </listitem>
                    <listitem>
                        Select the target product directory by either typing the product path into the text
                        filed or by pressing the file selection button to invoke a standard file dialog.
                    </listitem>
                 </itemizedlist>
            </listitem>
            <listitem>
                'Open in Visat': If this checkbox is selected, the output product is opened in Visat
                after successful processing.
            </listitem>
        </itemizedlist>
    </sect1>

    <sect1 id="sum.processor.preprocessor.control">
        <title>Control Buttons</title>

        From the 'I/O Parameters' tab pane, the following control buttons can be accessed:
        <itemizedlist mark='bullet'>
            <listitem>
                 'Run': If this button is clicked, the processor will start the computations.
            </listitem>
            <listitem>
                 'Close': If this button is clicked, the 'Synergy Aerosol and SDR Retrieval' dialog is closed.
            </listitem>
            <listitem>
                 'Help': If this button is clicked, this manual is displayed as online help.
            </listitem>
        </itemizedlist>

        <figure id="figure.processor.preprocessor.controlbuttons">
			<title>Synergy Preprocessor: control buttons</title>
			<graphic scale="60" fileref="figures/controlbuttons.png"/>
		</figure>

    </sect1>

    <sect1 id="sum.processor.preprocessor.gpt">
        <title>Processing from command line</title>

        Since the MERIS/(A)ATSR Synergy toolbox makes use of the BEAM graph processing framework, it can be
        used also as a command line tool outside BEAM-VISAT. The graph processing is invoked
        by the command
        <itemizedlist mark='bullet'>
            <listitem>
                 ${BEAM-INSTALL-DIR}/bin/gpt
            </listitem>
        </itemizedlist>

        To obtain general help on the praph processing, use the command
        <itemizedlist mark='bullet'>
            <listitem>
                 ${BEAM-INSTALL-DIR}/bin/gpt -h
            </listitem>
        </itemizedlist>

        Specific help on the Synergy Preprocessor can be obtained with
        <itemizedlist mark='bullet'>
            <listitem>
                 ${BEAM-INSTALL-DIR}/bin/gpt -h synergy.CreateSynergy
            </listitem>
        </itemizedlist>
        In this case, information on the usage and a list of all available parameters are given
        (see <xref linkend="figure.processor.gpt" xrefstyle="select: label"/>).


        <figure id="figure.processor.gpt">
			<title>'Synergy Preprocessor: command line processing</title>
			<graphic scale="40" fileref="figures/preprocessing_gpt.png"/>
		</figure>

    </sect1>

</chapter>
