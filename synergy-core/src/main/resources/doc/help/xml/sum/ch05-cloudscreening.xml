<chapter id="sum.processor.cloudscreening">
    <title>The Cloud Screening Processor</title>

    <para>
        The  Cloud Screening Processor is the second of three main modules within the MERIS/(A)ATSR Synergy toolbox.
        Its purpose is to add various bands (i.e cloud flags) to the colocated MERIS/(A)ATSR L1b product
        obtained from the preprocessor. The output product from the cloud screening shall be used as input for the
        third module (aerosol retrieval and atmospheric correction).
    </para>
    
    <para>
        The user interface for the Cloud Screening Processor is represented by one main dialog, which
        consists of the following components:
        <itemizedlist mark='bullet'>
            <listitem>
                 'I/O Parameters' Tab Pane
            </listitem>
            <listitem>
                 'Processing Parameters' Tab Pane
            </listitem>
        </itemizedlist>
    </para>

    <sect1 id="sum.processor.cloudscreening.io">
        <title>I/O Parameters Tab Pane</title>

        <figure id="figure.processor.cloudscreening.iotab">
			<title>Cloud Screening: I/O Parameters Tab Pane</title>
			<graphic scale="60" fileref="figures/iotab_cloudscreening.png"/>
		</figure>

        This tab pane consists of the following components:
        <itemizedlist mark='bullet'>
            <listitem>
                Source product file: Select the source product file by either typing the product path into the text
                filed or by pressing the file selection button to invoke a standard file dialog.
                The source product must be a colocated MERIS/AATSR product generated by the 'Synergy Preprocessor'
                module of the MERIS/(A)ATSR Synergy Toolbox.
            </listitem>
            <listitem>
                Target product file: Select the target product file by either typing the product path into the text
                filed or by pressing the file selection button to invoke a standard file dialog.
            </listitem>
            <listitem>
                 Target product format and target directory:
                 <itemizedlist mark='bullet'>
                    <listitem>
                        'Save as': If this checkbox is selected, the output product will be saved to disk.
                    </listitem>
                    <listitem>
                        Target product format: Select one of the available output product formats.
                    </listitem>
                    <listitem>
                        Select the target product directory by either typing the product path into the text
                        filed or by pressing the file selection button to invoke a standard file dialog.
                    </listitem>
                 </itemizedlist>
            </listitem>
            <listitem>
                'Open in Visat': If this checkbox is selected, the output product is opened in Visat
                after successful processing.
            </listitem>
        </itemizedlist>
    </sect1>

    <sect1 id="sum.processor.cloudscreening.processing">
        <title>'Processing Parameters' Tab Pane</title>

        <figure id="figure.processor.cloudscreening.processingtab">
			<title>Cloud Screening: 'Processing Parameters' Tab Pane</title>
			<graphic scale="60" fileref="figures/processingtab_cloudscreening.png"/>
		</figure>

        This tab pane consists of the following components:
        <itemizedlist mark='bullet'>
            <listitem>
                'Use the AATSR forward view when classifying': If his checkbox is selected, the AATSR forward view
                is considered in the cloud classification algorithm (otherwise nadir view only).
            </listitem>
            <listitem>
                'Compute cloud index': If this checkbox is selected, a cloud index is computed and written
                as single band 'cloud_index_synergy' to the target product.
            </listitem>
            <listitem>
                'Compute snow risk flag': If this checkbox is selected, a snow risk flag is computed
                and added to a flag band 'cloud_flags_synergy', which is written to the target product.
            </listitem>
            <listitem>
                'Compute cloud shadow risk flag': If this checkbox is selected, a cloud shadow risk flag is computed
                and added to a flag band 'cloud_flags_synergy', which is written to the target product. 
            </listitem>
        </itemizedlist>

        <para>
            See [4] for more details on the computation and physical meaning of the quantities listed above.
        </para>
    </sect1>

    <sect1 id="sum.processor.cloudscreening.control">
        <title>Control Buttons</title>

        From both tab panes, the following control buttons can be accessed:
        <itemizedlist mark='bullet'>
            <listitem>
                 'Run': If this button is clicked, the processor will start the computations.
            </listitem>
            <listitem>
                 'Close': If this button is clicked, the 'Synergy Aerosol and SDR Retrieval' dialog is closed.
            </listitem>
            <listitem>
                 'Help': If this button is clicked, this manual is displayed as online help.
            </listitem>
        </itemizedlist>

        <figure id="figure.processor.cloudscreening.controlbuttons">
			<title>'Cloud Screening: control buttons</title>
			<graphic scale="60" fileref="figures/controlbuttons.png"/>
		</figure>

    </sect1>

    <sect1 id="sum.processor.cloudscreening.gpt">
        <title>Processing from command line</title>

        Specific help on the Cloud Screening processor can be obtained with
        <itemizedlist mark='bullet'>
            <listitem>
                 ${BEAM-INSTALL-DIR}/bin/gpt -h synergy.SynergyCloudScreening
            </listitem>
        </itemizedlist>
        In this case, information on the usage and a list of all available parameters are given
        (see <xref linkend="figure.processor.cloudscreening.gpt" xrefstyle="select: label"/>).


        <figure id="figure.processor.cloudscreening.gpt">
			<title>Cloud Screening: command line processing</title>
			<graphic scale="40" fileref="figures/cloudscreening_gpt.png"/>
		</figure>

    </sect1>

</chapter>
